
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.10.1">
    
    
      
        <title>Advance - My Docs</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-e826f8942a.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-a20f419c8e.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="My Docs" class="md-header-nav__button md-logo">
          
            <i class="md-icon md-icon--home"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  User
                </span>
              
            
            Advance
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="" data-md-lang-tokenizer="[\s\-]+">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <div class="md-nav__button md-logo">
      
        <i class="md-icon md-icon--home"></i>
      
    </div>
    My Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../admin/" title="Admin" class="md-nav__link">
      Admin
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../api/" title="Api" class="md-nav__link">
      Api
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../build_with_pybossa/" title="Build with pybossa" class="md-nav__link">
      Build with pybossa
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../contributing/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../customizing/" title="Customizing" class="md-nav__link">
      Customizing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../faq/" title="Faq" class="md-nav__link">
      Faq
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../importers/" title="Importers" class="md-nav__link">
      Importers
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../install/" title="Install" class="md-nav__link">
      Install
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../installing_pybossa/" title="Installing pybossa" class="md-nav__link">
      Installing pybossa
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../model/" title="Model" class="md-nav__link">
      Model
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../nginx/" title="Nginx" class="md-nav__link">
      Nginx
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../plugins/" title="Plugins" class="md-nav__link">
      Plugins
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../translating/" title="Translating" class="md-nav__link">
      Translating
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../vagrant_pybossa/" title="Vagrant pybossa" class="md-nav__link">
      Vagrant pybossa
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-17" type="checkbox" id="nav-17">
    
    <label class="md-nav__link" for="nav-17">
      Changelog
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-17">
        Changelog
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v0.2.3/" title="V0.2.3" class="md-nav__link">
      V0.2.3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v1.0.0/" title="V1.0.0" class="md-nav__link">
      V1.0.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v1.1.0/" title="V1.1.0" class="md-nav__link">
      V1.1.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v1.1.1/" title="V1.1.1" class="md-nav__link">
      V1.1.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v1.1.2/" title="V1.1.2" class="md-nav__link">
      V1.1.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v1.1.3/" title="V1.1.3" class="md-nav__link">
      V1.1.3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v1.2.0/" title="V1.2.0" class="md-nav__link">
      V1.2.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v1.2.1/" title="V1.2.1" class="md-nav__link">
      V1.2.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v1.2.2/" title="V1.2.2" class="md-nav__link">
      V1.2.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v1.3.0/" title="V1.3.0" class="md-nav__link">
      V1.3.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v1.4.0/" title="V1.4.0" class="md-nav__link">
      V1.4.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v1.4.1/" title="V1.4.1" class="md-nav__link">
      V1.4.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v1.5.0/" title="V1.5.0" class="md-nav__link">
      V1.5.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v1.5.1/" title="V1.5.1" class="md-nav__link">
      V1.5.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v1.6.0/" title="V1.6.0" class="md-nav__link">
      V1.6.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v1.6.1/" title="V1.6.1" class="md-nav__link">
      V1.6.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v1.6.2/" title="V1.6.2" class="md-nav__link">
      V1.6.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v2.0.0/" title="V2.0.0" class="md-nav__link">
      V2.0.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v2.1.0/" title="V2.1.0" class="md-nav__link">
      V2.1.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v2.2.0/" title="V2.2.0" class="md-nav__link">
      V2.2.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v2.2.1/" title="V2.2.1" class="md-nav__link">
      V2.2.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v2.3.0/" title="V2.3.0" class="md-nav__link">
      V2.3.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../changelog/v2.3.8/" title="V2.3.8" class="md-nav__link">
      V2.3.8
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-18" type="checkbox" id="nav-18" checked>
    
    <label class="md-nav__link" for="nav-18">
      User
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-18">
        User
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Advance
      </label>
    
    <a href="./" title="Advance" class="md-nav__link md-nav__link--active">
      Advance
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#deprecated-new-work-flow" title="DEPRECATED: New Work Flow" class="md-nav__link">
    DEPRECATED: New Work Flow
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deprecated-checking-if-the-project-has-to-load-a-task-or-request-a-new-one" title="DEPRECATED: Checking if the project has to load a Task or request a new one" class="md-nav__link">
    DEPRECATED: Checking if the project has to load a Task or request a new one
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deprecated-loading-the-specific-task" title="DEPRECATED: Loading the specific task" class="md-nav__link">
    DEPRECATED: Loading the specific task
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deprecated-requesting-a-new-task-after-saving-an-answer" title="DEPRECATED: Requesting a new task after saving an answer" class="md-nav__link">
    DEPRECATED: Requesting a new task after saving an answer
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pbs/" title="Pbs" class="md-nav__link">
      Pbs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../project_settings/" title="Project settings" class="md-nav__link">
      Project settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial/" title="Tutorial" class="md-nav__link">
      Tutorial
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#deprecated-new-work-flow" title="DEPRECATED: New Work Flow" class="md-nav__link">
    DEPRECATED: New Work Flow
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deprecated-checking-if-the-project-has-to-load-a-task-or-request-a-new-one" title="DEPRECATED: Checking if the project has to load a Task or request a new one" class="md-nav__link">
    DEPRECATED: Checking if the project has to load a Task or request a new one
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deprecated-loading-the-specific-task" title="DEPRECATED: Loading the specific task" class="md-nav__link">
    DEPRECATED: Loading the specific task
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deprecated-requesting-a-new-task-after-saving-an-answer" title="DEPRECATED: Requesting a new task after saving an answer" class="md-nav__link">
    DEPRECATED: Requesting a new task after saving an answer
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Advance</h1>
                
                <p>===============================================</p>
<div class="admonition note">

This documentation is deprecated. The new [PYBOSSA.JS](https://github.com/Scifabric/pybossa.js/) library, will do

:   automatically all the described elements in this page for your
    project, simplifying your code. The tutorial uses the new PYBOSSA.JS
    version and explain how to use it. Please, upgrade your project.

</div>

<p>PYBOSSA features a new endpoint system that allows every project to load
a specific Task for a given project.</p>
<p>The following URL is available for every project:</p>
<pre><code>http://pybossa.com/project/slug/task/id
</code></pre>
<p>The new endpoint is the same one as the <strong>presenter</strong> one, so the
template.html should take care of using this new endpoint using some
JavaScript.</p>
<h2 id="deprecated-new-work-flow">DEPRECATED: New Work Flow</h2>
<p>This new endpoint opens the possibility to use the following work flow:</p>
<ul>
<li>Users will load the following page
    <a href="http://pybossa.com/project/newtask">http://pybossa.com/project/newtask</a></li>
<li>The template.html JavaScript should check if the
    window.location.pathname has the following sub-string: task</li>
<li>If the answer is Yes, then, it should load using an AJAX call the
    information for the given task</li>
<li>Else, the pybossa.newTask() method should be used to obtain a task
    for the user, and change the window.location.href to the new
    endpoint:<ul>
<li>pybossa.newTask gets the task.id that the user has to load</li>
</ul>
</li>
</ul>
<p>Therefore, while this new work flow is more powerful, the owner of the
project will have to code a bit more for loading the tasks in its own
URL</p>
<h2 id="deprecated-checking-if-the-project-has-to-load-a-task-or-request-a-new-one">DEPRECATED: Checking if the project has to load a Task or request a new one</h2>
<p>The following code shows how any PYBOSSA project can check if it has to
load a specific task, or request a new one for the user using
PYBOSSA.JS:</p>
<pre><code>pathArray = window.location.pathname.split('/');
if (window.location.pathname.indexOf('/task/')!=-1) {
    var l = pathArray.length;
    var i = 0;
    for (i=0;i&lt;l;i++) {
        if (pathArray[i]=='task') {
            loadTask(pathArray[i+1]);
        }
    }
}
else {
    pybossa.newTask("flickrperson").done( function( data ) {

        if ( !$.isEmptyObject(data.task) ) {
            window.location.pathname = "/project/flickrperson/task/" + data.task.id;
        }
       else {
            $(".skeleton").hide();
            $("#finish").fadeIn();
        }
    });
}
</code></pre>
<p>The first part, gets the URL pathname and checks if the URL contains the
specific keyword <strong>task</strong>. If the answer is yes, the code will get all
the items from the pathname, calling the function
<strong>loadTask(pathArray[i+1])</strong>.</p>
<p>The code checks if after requesting a new Task, nothing is returned,
then the presenter should be shown with a message telling the user that
he has participated in all the available tasks.</p>
<h2 id="deprecated-loading-the-specific-task">DEPRECATED: Loading the specific task</h2>
<p>Once the project has obtained a task for the user, the function loadTask
will be called:</p>
<pre><code>function loadTask( task_id ) {
  // Uncomment next line for debugging purposes
  //console.log( data );
  var t = $.ajax({
      url: '/api/task/'+task_id,
      dataType: 'json'
  });
  t.done( function (task) {
      if ( !$.isEmptyObject(task) ) {
          spinnerStart();
          if (task.status=='completed') {
              $('#answer').hide();
              $('#disqus_thread').hide();
              $('#taskcompleted').show();
          }
          $("#question h2").text(task.info.question);
          $("#task-id").text(task.id);
          $("#photo-link").attr("href", task.info.link);
          $("#photo").attr("src", task.info.url_m);
      }
     else {
          $(".skeleton").hide();
          $("#finish").fadeIn();
      }
  });
}
</code></pre>
<p>The AJAX call request the task_id and when the call has been <strong>done</strong>
the data will be loaded. The only difference with the previous method,
is that this work flow needs to have the <strong>question</strong> in task.info JSON
object, otherwise the task question will be empty.</p>
<p>Finally, we will have to load a new task after the user has saved the
answer.</p>
<h2 id="deprecated-requesting-a-new-task-after-saving-an-answer">DEPRECATED: Requesting a new task after saving an answer</h2>
<p>When the user submits a task, the previous code requested a new task
directly from the same page, however we have to do it in a different
way.</p>
<p>Once the answer has been saved, the submitTask(answer) function should
change the pathname again for requesting a new task:</p>
<pre><code>window.location.pathname = "/project/flickrperson/newtask"
</code></pre>
<p>This will trigger the right methods described in the beginning of this
section, checking if the URL has the <strong>task</strong> keyword in the pathname,
and acting accordingly.</p>
<p>With this set of changes, the project will be able to load external
tools like Disqus forums, as each task will have its own URL, so users
can talk about it.</p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../changelog/v2.3.8/" title="V2.3.8" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                V2.3.8
              </span>
            </div>
          </a>
        
        
          <a href="../overview/" title="Overview" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Overview
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-f3ab9e5ff8.js"></script>
      
      
      <script>app.initialize({url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>