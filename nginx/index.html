
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <link rel="shortcut icon" href="../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.10.1">
    
    
      
        <title>Nginx - My Docs</title>
      
    
    
      <script src="../assets/javascripts/modernizr-e826f8942a.js"></script>
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application-a20f419c8e.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="My Docs" class="md-header-nav__button md-logo">
          
            <i class="md-icon md-icon--home"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
            
            Nginx
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="" data-md-lang-tokenizer="[\s\-]+">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <div class="md-nav__button md-logo">
      
        <i class="md-icon md-icon--home"></i>
      
    </div>
    My Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../admin/" title="Admin" class="md-nav__link">
      Admin
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../api/" title="Api" class="md-nav__link">
      Api
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../build_with_pybossa/" title="Build with pybossa" class="md-nav__link">
      Build with pybossa
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contributing/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../customizing/" title="Customizing" class="md-nav__link">
      Customizing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../faq/" title="Faq" class="md-nav__link">
      Faq
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../importers/" title="Importers" class="md-nav__link">
      Importers
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../install/" title="Install" class="md-nav__link">
      Install
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../installing_pybossa/" title="Installing pybossa" class="md-nav__link">
      Installing pybossa
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../model/" title="Model" class="md-nav__link">
      Model
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Nginx
      </label>
    
    <a href="./" title="Nginx" class="md-nav__link md-nav__link--active">
      Nginx
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#first-steps" title="First steps" class="md-nav__link">
    First steps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-nginx-and-uwsgi" title="Installing nginx and uwsgi" class="md-nav__link">
    Installing nginx and uwsgi
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-nginx-and-uwsgi-for-pybossa" title="Configuring nginx and uwsgi for PYBOSSA" class="md-nav__link">
    Configuring nginx and uwsgi for PYBOSSA
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-pybossaini-file-for-uwsgi" title="Creating the pybossa.ini file for uwsgi" class="md-nav__link">
    Creating the pybossa.ini file for uwsgi
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-supervisord" title="Install supervisord" class="md-nav__link">
    Install supervisord
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-redis-and-sentinel-as-service-with-supervisord" title="Configure Redis and sentinel as service with supervisord" class="md-nav__link">
    Configure Redis and sentinel as service with supervisord
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-rq-scheduler-and-worker-to-run-with-supervisord" title="Configure RQ-Scheduler and -Worker to run with supervisord" class="md-nav__link">
    Configure RQ-Scheduler and -Worker to run with supervisord
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup-pybossa-itself" title="Setup PYBOSSA itself" class="md-nav__link">
    Setup PYBOSSA itself
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#let-pybossa-run-as-service" title="Let PYBOSSA run as service" class="md-nav__link">
    Let PYBOSSA run as service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-update-pybossa-service" title="How to update PYBOSSA service" class="md-nav__link">
    How to update PYBOSSA service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logs-of-pybossa-services" title="Logs of PYBOSSA services" class="md-nav__link">
    Logs of PYBOSSA services
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#last-words-about-security-and-scaling" title="Last words about Security and Scaling" class="md-nav__link">
    Last words about Security and Scaling
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../plugins/" title="Plugins" class="md-nav__link">
      Plugins
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../translating/" title="Translating" class="md-nav__link">
      Translating
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../vagrant_pybossa/" title="Vagrant pybossa" class="md-nav__link">
      Vagrant pybossa
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-17" type="checkbox" id="nav-17">
    
    <label class="md-nav__link" for="nav-17">
      Changelog
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-17">
        Changelog
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v0.2.3/" title="V0.2.3" class="md-nav__link">
      V0.2.3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v1.0.0/" title="V1.0.0" class="md-nav__link">
      V1.0.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v1.1.0/" title="V1.1.0" class="md-nav__link">
      V1.1.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v1.1.1/" title="V1.1.1" class="md-nav__link">
      V1.1.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v1.1.2/" title="V1.1.2" class="md-nav__link">
      V1.1.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v1.1.3/" title="V1.1.3" class="md-nav__link">
      V1.1.3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v1.2.0/" title="V1.2.0" class="md-nav__link">
      V1.2.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v1.2.1/" title="V1.2.1" class="md-nav__link">
      V1.2.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v1.2.2/" title="V1.2.2" class="md-nav__link">
      V1.2.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v1.3.0/" title="V1.3.0" class="md-nav__link">
      V1.3.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v1.4.0/" title="V1.4.0" class="md-nav__link">
      V1.4.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v1.4.1/" title="V1.4.1" class="md-nav__link">
      V1.4.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v1.5.0/" title="V1.5.0" class="md-nav__link">
      V1.5.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v1.5.1/" title="V1.5.1" class="md-nav__link">
      V1.5.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v1.6.0/" title="V1.6.0" class="md-nav__link">
      V1.6.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v1.6.1/" title="V1.6.1" class="md-nav__link">
      V1.6.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v1.6.2/" title="V1.6.2" class="md-nav__link">
      V1.6.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v2.0.0/" title="V2.0.0" class="md-nav__link">
      V2.0.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v2.1.0/" title="V2.1.0" class="md-nav__link">
      V2.1.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v2.2.0/" title="V2.2.0" class="md-nav__link">
      V2.2.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v2.2.1/" title="V2.2.1" class="md-nav__link">
      V2.2.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v2.3.0/" title="V2.3.0" class="md-nav__link">
      V2.3.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/v2.3.8/" title="V2.3.8" class="md-nav__link">
      V2.3.8
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-18" type="checkbox" id="nav-18">
    
    <label class="md-nav__link" for="nav-18">
      User
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-18">
        User
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../user/advance/" title="Advance" class="md-nav__link">
      Advance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../user/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../user/pbs/" title="Pbs" class="md-nav__link">
      Pbs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../user/project_settings/" title="Project settings" class="md-nav__link">
      Project settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../user/tutorial/" title="Tutorial" class="md-nav__link">
      Tutorial
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#first-steps" title="First steps" class="md-nav__link">
    First steps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-nginx-and-uwsgi" title="Installing nginx and uwsgi" class="md-nav__link">
    Installing nginx and uwsgi
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-nginx-and-uwsgi-for-pybossa" title="Configuring nginx and uwsgi for PYBOSSA" class="md-nav__link">
    Configuring nginx and uwsgi for PYBOSSA
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-pybossaini-file-for-uwsgi" title="Creating the pybossa.ini file for uwsgi" class="md-nav__link">
    Creating the pybossa.ini file for uwsgi
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-supervisord" title="Install supervisord" class="md-nav__link">
    Install supervisord
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-redis-and-sentinel-as-service-with-supervisord" title="Configure Redis and sentinel as service with supervisord" class="md-nav__link">
    Configure Redis and sentinel as service with supervisord
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-rq-scheduler-and-worker-to-run-with-supervisord" title="Configure RQ-Scheduler and -Worker to run with supervisord" class="md-nav__link">
    Configure RQ-Scheduler and -Worker to run with supervisord
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup-pybossa-itself" title="Setup PYBOSSA itself" class="md-nav__link">
    Setup PYBOSSA itself
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#let-pybossa-run-as-service" title="Let PYBOSSA run as service" class="md-nav__link">
    Let PYBOSSA run as service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-update-pybossa-service" title="How to update PYBOSSA service" class="md-nav__link">
    How to update PYBOSSA service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logs-of-pybossa-services" title="Logs of PYBOSSA services" class="md-nav__link">
    Logs of PYBOSSA services
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#last-words-about-security-and-scaling" title="Last words about Security and Scaling" class="md-nav__link">
    Last words about Security and Scaling
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="deploying-pybossa-with-nginx-and-uwsgi">Deploying PYBOSSA with nginx and uwsgi</h1>
<p>PYBOSSA is a python web application built using the Flask
micro-framework.</p>
<p>This guide describes how to make PYBOSSA run as a service or daemon
permanently in the background. This is useful if you want to run a
production ready single PYBOSSA web server. If you only want to test
PYBOSSA please follow only install.</p>
<p>Pre-requisites:</p>
<blockquote>
<ul>
<li>nginx</li>
<li>uwsgi</li>
<li>supervisord</li>
<li>Redis and sentinel as service (with supervisord)</li>
<li>RQ-Scheduler and RQ-Worker as service (with supervisord)</li>
<li>PYBOSSA as service (with supervisord)</li>
</ul>
</blockquote>
<h2 id="first-steps">First steps</h2>
<p>If you have not done already: Please create a new user account, e.g.
pybossa (a non root at best) which will run the PYBOSSA instance. You
then have to follow the instructions from install first to get a
runnable PYBOSSA. After you&rsquo;ve done that please continue with this
guide.</p>
<h2 id="installing-nginx-and-uwsgi">Installing nginx and uwsgi</h2>
<p>You have to install nginx and uwsgi in your server machine. In a
Debian/Ubuntu machine you can install them running the following
commands:</p>
<pre><code>sudo apt-get install nginx
</code></pre>
<p>in the (virtualenv-)installation directory of pybossa you need to
install uwsgi:</p>
<pre><code>pip install -U uwsgi
</code></pre>
<h2 id="configuring-nginx-and-uwsgi-for-pybossa">Configuring nginx and uwsgi for PYBOSSA</h2>
<p>We assume you only want to run PYBOSSA on your nginx webserver. If you
want to run also other services on the same server you need to modify
the nginx config files!</p>
<p>You have to copy and adapt the following files from your local PYBOSSA
installation:</p>
<blockquote>
<ul>
<li>contrib/nginx/pybossa</li>
<li>contrib/pybossa.ini</li>
</ul>
</blockquote>
<p>The PYBOSSA virtual host file (<strong>contrib/nginx/pybossa</strong>) has the
following directives:</p>
<pre><code>location / { try_files $uri @pybossa; }

location @pybossa {
    include uwsgi_params;
    uwsgi_pass unix:/tmp/pybossa.sock;
}

location  /static {

            # change that to your pybossa static directory
            alias /home/Scifabric/pybossa/pybossa/themes/default/static;

            autoindex on;
            expires max;
        }
</code></pre>
<p>You can specify a user and group from your machine with lower privileges
in order to improve the security of the site. You can also use the
www-data user and group name.</p>
<p>Once you have adapted the PATH in the alias in that file, copy it into
the folder:</p>
<pre><code>sudo cp contrib/nginx/pybossa /etc/nginx/sites-available/.
</code></pre>
<p>please delete the default config in sites-enabled (do not worry there is
a backup):</p>
<pre><code>sudo rm /etc/nginx/sites-enabled/default
</code></pre>
<p>Enable the PYBOSSA site:</p>
<pre><code>sudo ln -s /etc/nginx/sites-available/pybossa /etc/nginx/sites-enabled/pybossa
</code></pre>
<p>And restart the server:</p>
<pre><code>sudo service nginx restart
</code></pre>
<h2 id="creating-the-pybossaini-file-for-uwsgi">Creating the pybossa.ini file for uwsgi</h2>
<p>You have to copy the <strong>pybossa.ini.template</strong> file to pybossa.ini in
your PYBOSSA installation and adapt the paths to match your
configuration!</p>
<p>The content of this file is the following:</p>
<pre><code>[uwsgi]
socket = /tmp/pybossa.sock
chmod-socket = 666
chdir = /home/pybossa/pybossa
pythonpath = ..
virtualenv = /home/pybossa/pybossa/env
module = run:app
cpu-affinity = 1
processes = 2
threads = 2
stats = /tmp/pybossa-stats.sock
buffer-size = 65535
</code></pre>
<h2 id="install-supervisord">Install supervisord</h2>
<p>Supervisord is used to let PYBOSSA and its RQ system run as Daemon in
the background. It shares some of the same goals of programs like
launchd, daemontools, and runit.</p>
<p>Install it:</p>
<pre><code>sudo apt-get install supervisor
</code></pre>
<h2 id="configure-redis-and-sentinel-as-service-with-supervisord">Configure Redis and sentinel as service with supervisord</h2>
<p>First stop redis service and all running redis instances with:</p>
<pre><code>sudo service redis-server stop
killall redis-server
</code></pre>
<p>We want to run redis and sentinel with supervisord because supervisord
is more reliable when redis crashes (which can happen when you have too
less memory). So we disable redis-server daemon service with:</p>
<pre><code>sudo rm /etc/init.d/redis-server
</code></pre>
<p>Go to your pybossa installation directory and copy following files:</p>
<pre><code>sudo cp contrib/supervisor/redis-server.conf /etc/supervisor/conf.d/
sudo cp contrib/supervisor/redis-sentinel.conf /etc/supervisor/conf.d/
sudo cp contrib/redis-supervisor/redis.conf /etc/redis/
sudo cp contrib/redis-supervisor/sentinel.conf /etc/redis/
sudo chown redis:redis /etc/redis/redis.conf
sudo chown redis:redis /etc/redis/sentinel.conf
</code></pre>
<p>Now we restart supervisord (please do a full stop and start as
described):</p>
<pre><code>sudo service supervisor stop
sudo service supervisor start
</code></pre>
<p>To verify install you can list all redis processes and you should see a
redis-server at port 6379 and redis-sentinel at port 26379:</p>
<pre><code>ps aux | grep redis
</code></pre>
<p>This two services will no run whenever the server is running (even after
reboot).</p>
<h2 id="configure-rq-scheduler-and-worker-to-run-with-supervisord">Configure RQ-Scheduler and -Worker to run with supervisord</h2>
<p>You need to adjust the paths and user account in this two config files
according to your installation! Then copy them to supervisor (do not
forget to edit them):</p>
<pre><code>sudo cp contrib/supervisor/rq-scheduler.conf.template /etc/supervisor/conf.d/rq-scheduler.conf
sudo cp contrib/supervisor/rq-worker.conf.template /etc/supervisor/conf.d/rq-worker.conf
</code></pre>
<p>Restart supervisor fully:</p>
<pre><code>sudo service supervisor stop
sudo service supervisor start
</code></pre>
<p>Verify service running. You should see a rqworker and rqscheduler
instance in console:</p>
<pre><code>ps aux | grep rq
</code></pre>
<h2 id="setup-pybossa-itself">Setup PYBOSSA itself</h2>
<p>This steps are recommended to do when you run PYBOSSA in nginx. Open
your <strong>settings_local.py</strong> in your PYBOSSA installation and uncomment
or delete the two lines with <strong>HOST</strong> and <strong>PORT</strong>, e.g.:</p>
<pre><code># HOST = '0.0.0.0'
# PORT = 12000
</code></pre>
<p>After that specify the full server URL where your PYBOSSA is reachable,
e.g.:</p>
<pre><code>SERVER_NAME = mypybossa.com
PORT = 80
</code></pre>
<h2 id="let-pybossa-run-as-service">Let PYBOSSA run as service</h2>
<p>Finally we need to let pybossa run as service. Adjust again the paths
and user name in this file and copy it to supervisor config directory:</p>
<pre><code>sudo cp contrib/supervisor/pybossa.conf.template /etc/supervisor/conf.d/pybossa.conf
</code></pre>
<p>Edit now the file and adjust paths &amp; user name.</p>
<p>Restart supervisor fully:</p>
<pre><code>sudo service supervisor stop
sudo service supervisor start
</code></pre>
<p>You should now have a running PYBOSSA production ready webserver on your
nginx. Open your browser and check your configured domain
<a href="http://example.com">http://example.com</a>.</p>
<p>Congratulations! :)</p>
<h2 id="how-to-update-pybossa-service">How to update PYBOSSA service</h2>
<p>Upgrading and updating PYBOSSA as service works the same as for a
standalone version. Please follow instructions on install. However a few
extra steps are required after you updated.</p>
<p>You need to restart all supervisor controlled services after updating:</p>
<pre><code>sudo supervisorctl restart rq-scheduler
sudo supervisorctl restart rq-worker
sudo supervisorctl restart pybossa
</code></pre>
<h2 id="logs-of-pybossa-services">Logs of PYBOSSA services</h2>
<p>You can find logs of all PYBOSSA services in this directory:</p>
<pre><code>cd /var/log/supervisor
</code></pre>
<h2 id="last-words-about-security-and-scaling">Last words about Security and Scaling</h2>
<p>This guide does not cover how to secure your PYBOSSA installation. As
every web server you have to make it secure (like e.g. strong passwords,
automatic Ubuntu security updates, firewall, access restrictions).
Please use guides on the Internet to do so.</p>
<p>PYBOSSA can also be scaled horizontally to run with redundant servers
and with zero downtime over many redis, db and web servers with load
balancers in between.</p>
<p>If you need a secure and/or scalable PYBOSSA installation please contact
us. We will be glad to help you and we can even do all the hosting,
customization, administration and installation for you when you want for
a small fee.</p>
<p>Contact address:</p>
<p><a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#105;&#110;&#102;&#111;&#64;&#112;&#121;&#98;&#111;&#115;&#115;&#97;&#46;&#99;&#111;&#109;">&#105;&#110;&#102;&#111;&#64;&#112;&#121;&#98;&#111;&#115;&#115;&#97;&#46;&#99;&#111;&#109;</a></p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../model/" title="Model" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Model
              </span>
            </div>
          </a>
        
        
          <a href="../overview/" title="Overview" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Overview
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application-f3ab9e5ff8.js"></script>
      
      
      <script>app.initialize({url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>